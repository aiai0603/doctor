<view><u-form class="vue-ref" vue-id="128a410a-1" model="{{form}}" label-width="200" label-style="{{labelStyle}}" data-ref="uForm" bind:__l="__l" vue-slots="{{['default']}}"><view class="doctor" style="{{'height:'+(form.doctorId?'200rpx':'')+';'}}"><block wx:if="{{!form.doctor.name}}"><u-form-item style="width:100%;" vue-id="{{('128a410a-2')+','+('128a410a-1')}}" label="诊断医生" prop="doctor" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['chooseDoc']]]]}}" style="color:#ccc;float:right;margin-right:30rpx;" bindtap="__e">选择医生<u-icon vue-id="{{('128a410a-3')+','+('128a410a-2')}}" name="arrow-right" bind:__l="__l"></u-icon></view></u-form-item></block><block wx:else><view class="doctor-info"><view style="display:flex;flex-direction:row;padding:20rpx 0;"><u-avatar vue-id="{{('128a410a-4')+','+('128a410a-1')}}" size="150" src="{{form.doctor.avatar}}" bind:__l="__l"></u-avatar><view style="margin-left:20rpx;height:120rpx;"><view style="display:flex;margin-top:10rpx;flex-direction:row;"><label style="font-weight:700;font-size:38rpx;" class="_span">{{form.doctor.name}}</label><u-tag class="tag" vue-id="{{('128a410a-5')+','+('128a410a-1')}}" type="warning" text="{{form.doctor.level}}" shape="circle" bind:__l="__l"></u-tag></view><view style="margin-top:30rpx;">{{form.doctor.dept}}</view></view></view><view data-event-opts="{{[['tap',[['chooseDoc']]]]}}" style="color:#ccc;float:right;" bindtap="__e">更换医生<u-icon vue-id="{{('128a410a-6')+','+('128a410a-1')}}" name="arrow-right" bind:__l="__l"></u-icon></view></view></block></view><u-gap vue-id="{{('128a410a-7')+','+('128a410a-1')}}" height="20" bg-color="#f2f2f2" bind:__l="__l"></u-gap><u-form-item vue-id="{{('128a410a-8')+','+('128a410a-1')}}" label="问诊人" prop="patient" required="{{true}}" bind:__l="__l" vue-slots="{{['right','right']}}"><view hidden="{{!(!form.patientInfo.name)}}" style="margin-right:30rpx;" slot="right" data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" bindtap="__e">填写信息<u-icon vue-id="{{('128a410a-9')+','+('128a410a-8')}}" name="arrow-right" bind:__l="__l"></u-icon></view><view hidden="{{!(form.patientInfo.name)}}" style="margin-right:30rpx;color:#000;" slot="right" data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" bindtap="__e">{{form.patientInfo.name+" "+form.patientInfo.sex+" "+form.patientInfo.age}}</view></u-form-item><u-form-item vue-id="{{('128a410a-10')+','+('128a410a-1')}}" label="确诊诊断" prop="diagnosis" required="{{true}}" bind:__l="__l" vue-slots="{{['right','right']}}"><view hidden="{{!(!form.diagnosis)}}" style="margin-right:30rpx;" slot="right" data-event-opts="{{[['tap',[['chooseDi']]]]}}" bindtap="__e">选择诊断<u-icon vue-id="{{('128a410a-11')+','+('128a410a-10')}}" name="arrow-right" bind:__l="__l"></u-icon></view><view hidden="{{!(form.diagnosis)}}" style="margin-right:30rpx;color:#000;" slot="right" data-event-opts="{{[['tap',[['chooseDi']]]]}}" bindtap="__e">{{form.diagnosis}}</view></u-form-item><u-form-item vue-id="{{('128a410a-12')+','+('128a410a-1')}}" label="所需药品" prop="drug" border-bottom="{{false}}" required="{{true}}" bind:__l="__l" vue-slots="{{['right']}}"><view style="margin-right:30rpx;" slot="right" data-event-opts="{{[['tap',[['addMedicine']]]]}}" bindtap="__e">添加药品<u-icon vue-id="{{('128a410a-13')+','+('128a410a-12')}}" name="arrow-right" bind:__l="__l"></u-icon></view></u-form-item><block wx:if="{{form.drugList.length!=0}}"><view class="drug"><block wx:for="{{form.drugList}}" wx:for-item="item" wx:for-index="index"><block><u-tag style="margin:20rpx 25rpx;" vue-id="{{('128a410a-14-'+index)+','+('128a410a-1')}}" type="success" text="{{form.drugList[index].drugName}}" closeable="{{true}}" data-event-opts="{{[['^close',[['delTag',[index]]]]]}}" bind:close="__e" bind:__l="__l"></u-tag></block></block></view></block><u-gap vue-id="{{('128a410a-15')+','+('128a410a-1')}}" height="20" bg-color="#f2f2f2" bind:__l="__l"></u-gap><view style="display:flex;align-items:center;width:100%;flex-direction:row;"><view class="title-item"></view><u-form-item style="width:100%;" vue-id="{{('128a410a-16')+','+('128a410a-1')}}" label="病情描述" prop="describe" required="{{true}}" bind:__l="__l"></u-form-item></view><view style="width:100%;display:flex;justify-content:center;flex-direction:row;"><view style="width:90%;margin-top:20rpx;"><u-input bind:input="__e" vue-id="{{('128a410a-17')+','+('128a410a-1')}}" type="textarea" autoHeight="{{true}}" clearable="{{false}}" placeholder="{{placeholder}}" value="{{form.value}}" data-event-opts="{{[['^input',[['__set_model',['$0','value','$event',[]],['form']]]]]}}" bind:__l="__l"></u-input></view></view><u-gap vue-id="{{('128a410a-18')+','+('128a410a-1')}}" height="20" bg-color="#f2f2f2" bind:__l="__l"></u-gap><view style="display:flex;align-items:center;width:100%;flex-direction:row;"><view class="title-item"></view><u-form-item style="width:100%;" vue-id="{{('128a410a-19')+','+('128a410a-1')}}" label="病情照片" prop="photo" bind:__l="__l"></u-form-item></view><view style="width:100%;display:flex;align-items:center;margin-top:30rpx;flex-direction:column;"><view style="width:90%;"><u-upload class="vue-ref" vue-id="{{('128a410a-20')+','+('128a410a-1')}}" auto-upload="{{false}}" deletable="{{deletable}}" action="{{action}}" data-ref="uUpload" data-event-opts="{{[['^onUploaded',[['success']]],['^onChooseComplete',[['choose']]],['^onRemove',[['remove']]]]}}" bind:onUploaded="__e" bind:onChooseComplete="__e" bind:onRemove="__e" bind:__l="__l"></u-upload></view><view style="width:85%;margin-top:60rpx;color:#ccc;margin-bottom:80rpx;"><text space="emsp">{{''+text+''}}</text></view></view></u-form><block wx:if="{{!img}}"><u-button style="height:100rpx;" vue-id="128a410a-21" type="success" data-event-opts="{{[['^click',[['submit']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">提交信息</u-button></block><block wx:else><u-button style="height:100rpx;" vue-id="128a410a-22" type="primary" data-event-opts="{{[['^click',[['saveImg']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">保存图片</u-button></block><u-popup vue-id="128a410a-23" mode="center" width="90%" height="60%" border-radius="20" closeable="{{true}}" value="{{showInfo}}" data-event-opts="{{[['^open',[['open']]],['^close',[['close']]],['^input',[['__set_model',['','showInfo','$event',[]]]]]]}}" bind:open="__e" bind:close="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="infoForm"><text style="margin:30rpx 0;font-weight:700;font-size:35rpx;">填写信息</text><u-form class="vue-ref" vue-id="{{('128a410a-24')+','+('128a410a-23')}}" model="{{popupform}}" label-align="left" label-width="180" label-style="{{labelStyle}}" data-ref="infoFrom" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('128a410a-25')+','+('128a410a-24')}}" label="姓名" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" class="form-item" vue-id="{{('128a410a-26')+','+('128a410a-25')}}" border="{{true}}" clearable="{{false}}" placeholder="请填写姓名" value="{{popupform.name}}" data-event-opts="{{[['^input',[['__set_model',['$0','name','$event',[]],['popupform']]]]]}}" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('128a410a-27')+','+('128a410a-24')}}" label="身份证号" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" class="form-item" vue-id="{{('128a410a-28')+','+('128a410a-27')}}" border="{{true}}" clearable="{{false}}" placeholder="请填写身份证号" value="{{popupform.number}}" data-event-opts="{{[['^input',[['__set_model',['$0','number','$event',[]],['popupform']]]]]}}" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('128a410a-29')+','+('128a410a-24')}}" label="性别" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input class="form-item" vue-id="{{('128a410a-30')+','+('128a410a-29')}}" type="select" border="{{true}}" placeholder="请选择性别" value="{{popupform.sex}}" data-event-opts="{{[['^click',[['e2']]],['^input',[['__set_model',['$0','sex','$event',[]],['popupform']]]]]}}" bind:click="__e" bind:input="__e" bind:__l="__l"></u-input><u-picker vue-id="{{('128a410a-31')+','+('128a410a-29')}}" mode="selector" default-selector="{{[0]}}" range="{{selectorSex}}" value="{{showSex}}" data-event-opts="{{[['^confirm',[['confirmSex']]],['^input',[['__set_model',['','showSex','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-picker></u-form-item><u-form-item vue-id="{{('128a410a-32')+','+('128a410a-24')}}" label="出生日期" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input class="form-item" vue-id="{{('128a410a-33')+','+('128a410a-32')}}" type="select" border="{{true}}" placeholder="请填写出生日期" value="{{popupform.birthday}}" data-event-opts="{{[['^click',[['e3']]],['^input',[['__set_model',['$0','birthday','$event',[]],['popupform']]]]]}}" bind:click="__e" bind:input="__e" bind:__l="__l"></u-input><u-picker vue-id="{{('128a410a-34')+','+('128a410a-32')}}" mode="time" value="{{showBirthday}}" data-event-opts="{{[['^confirm',[['confirmBirthday']]],['^input',[['__set_model',['','showBirthday','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-picker></u-form-item><u-form-item vue-id="{{('128a410a-35')+','+('128a410a-24')}}" label="手机号" required="{{true}}" border-bottom="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" class="form-item" vue-id="{{('128a410a-36')+','+('128a410a-35')}}" type="number" border="{{true}}" clearable="{{false}}" placeholder="请填写手机号" value="{{popupform.phone}}" data-event-opts="{{[['^input',[['__set_model',['$0','phone','$event',[]],['popupform']]]]]}}" bind:__l="__l"></u-input></u-form-item></u-form><u-button style="margin-top:50rpx;" vue-id="{{('128a410a-37')+','+('128a410a-23')}}" type="primary" data-event-opts="{{[['^click',[['saveInfo']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">保存</u-button></view></u-popup><u-modal vue-id="128a410a-38" content="提交成功" show-title="{{false}}" width="50%" value="{{showModal}}" data-event-opts="{{[['^confirm',[['confirm']]],['^input',[['__set_model',['','showModal','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-modal></view>